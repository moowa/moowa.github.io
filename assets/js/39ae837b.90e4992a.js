"use strict";(self.webpackChunkknowtes=self.webpackChunkknowtes||[]).push([[2949],{6118:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>t,contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"knowtes/itop/installation","title":"ITOP Installation and Upgrade Notes","description":"Installing Dockerized ITOP 2.1","source":"@site/docs/knowtes/itop/installation.md","sourceDirName":"knowtes/itop","slug":"/knowtes/itop/installation","permalink":"/docs/knowtes/itop/installation","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"itop","permalink":"/docs/tags/itop"}],"version":"current","frontMatter":{"tags":["itop"],"sidebar_class_name":"hidden"},"sidebar":"tutorialSidebar","previous":{"title":"ITOP","permalink":"/docs/knowtes/itop/"},"next":{"title":"Accessing iTop via Rest API","permalink":"/docs/knowtes/itop/rest_api"}}');var o=i(4848),d=i(8453);const l={tags:["itop"],sidebar_class_name:"hidden"},r="ITOP Installation and Upgrade Notes",t={},c=[{value:"Installing Dockerized ITOP 2.1",id:"installing-dockerized-itop-21",level:2},{value:"Installing Dockerized ITOP 2.2 in another container",id:"installing-dockerized-itop-22-in-another-container",level:2},{value:"Upgrading 2.2 to 2.7",id:"upgrading-22-to-27",level:2},{value:"Upgrading 2.1 to 2.7",id:"upgrading-21-to-27",level:2}];function a(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,d.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"itop-installation-and-upgrade-notes",children:"ITOP Installation and Upgrade Notes"})}),"\n",(0,o.jsx)(e.h2,{id:"installing-dockerized-itop-21",children:"Installing Dockerized ITOP 2.1"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["Get docker image: ",(0,o.jsx)(e.code,{children:"docker pull vbkunin/itop:2.1.0"})]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["Run docker container: ",(0,o.jsx)(e.code,{children:"sudo docker run -d -p 8000:80 -p 3306:3306 --name=itoptest210 vbkunin/itop:2.1.0"})]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["Get admin password\n",(0,o.jsx)(e.code,{children:"sudo docker exec <containername>/create_mysql_admin_user.sh"})," - will not actually create admin user, but will display admin password?"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"Change admin password inside docker mysql"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.code,{children:"SET PASSWORD FOR 'admin'@'%' = PASSWORD('newpassword')"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.code,{children:"FLUSH PRIVILEGES"})}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Manually install toolkit"}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Extract zip to folder named toolkit in topmost directory"}),"\n",(0,o.jsxs)(e.li,{children:["Launch toolkit by pointing browser to ",(0,o.jsx)(e.code,{children:"localhost:<port>/toolkit"})]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"installing-dockerized-itop-22-in-another-container",children:"Installing Dockerized ITOP 2.2 in another container"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"container name: upitop220"}),"\n",(0,o.jsx)(e.li,{children:"db name: itopdb220"}),"\n",(0,o.jsxs)(e.li,{children:["Get docker image: ",(0,o.jsx)(e.code,{children:"docker pull vbkunin/itop:2.2.0"})]}),"\n",(0,o.jsxs)(e.li,{children:["Run docker container: ",(0,o.jsx)(e.code,{children:"sudo docker run -d -p 8000:80 -p 3306:3306 --name=upitop220 vbkunin/itop:2.2.0"})]}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"Note: Had to change admin password via mysql due to issue: no /app/conf folder. To resolve, do:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["Copy dump to temporary directory inside the container: ",(0,o.jsx)(e.code,{children:"docker cp -a source_itop-dump.sql containername:/tmp/"})]}),"\n",(0,o.jsxs)(e.li,{children:["Dump db from 2.1: ",(0,o.jsx)(e.code,{children:"mysql -u___ -p___ dbname < /tmp/itop-dump.sql"})]}),"\n",(0,o.jsx)(e.li,{children:"Copy extensions directory"}),"\n",(0,o.jsx)(e.li,{children:"Go to localhost:8000/setup"}),"\n",(0,o.jsx)(e.li,{children:"Go through wizard, make sure Add Attribute is selected in extensions (if extension was made in previous version)"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"upgrading-22-to-27",children:"Upgrading 2.2 to 2.7"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["Install dockerized 2.7.0\n",(0,o.jsx)(e.code,{children:"sudo docker run -d -p 8000:80 -p 3306:3306 --name=upitop270 vbkunin/itop:2.7.0"}),"\nNote: go to ",(0,o.jsx)(e.code,{children:"localhost:8000/setup"})," using firefox, can\u2019t click the checkbox using chrome"]}),"\n",(0,o.jsxs)(e.li,{children:["Check admin password using\n",(0,o.jsx)(e.code,{children:"sudo docker logs upitop270 | grep -A7 -B1 \"Your MySQL user 'admin' has password:\""})]}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"dbname: upitopdb270"}),"\n",(0,o.jsx)(e.li,{children:"container: upitop270"}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.code,{children:"docker cp -a itop_dump.sql upitop270:/tmp/"})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"Dump db from 2.2"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.code,{children:"mysql -u__ -p__ upitopdb270 < /tmp/itop_dump.sql"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.code,{children:"docker cp -a extensions/sample-add-attribute upitop270:/var/www/html/extensions/"})}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["In docker bash, ",(0,o.jsx)(e.code,{children:"./make-itop-config-writable.sh"})]}),"\n",(0,o.jsxs)(e.li,{children:["In browser, go to ",(0,o.jsx)(e.code,{children:"localhost:8000/setup"})]}),"\n",(0,o.jsx)(e.li,{children:"Go through wizard, make sure Add Attribute is selected in extensions (if extension was made in previous version)"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"upgrading-21-to-27",children:"Upgrading 2.1 to 2.7"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["Install dockerized 2.7.0\n",(0,o.jsx)(e.code,{children:"sudo docker run -d -p 8000:80 -p 3306:3306 --name=containername vbkunin/itop:2.7.0"}),"\nNote: go to localhost:8000/setup using firefox, can\u2019t click the checkbox using chrome"]}),"\n",(0,o.jsx)(e.li,{children:"Check admin password using\n`sudo docker logs containername | grep -A7 -B1 \"Your MySQL user 'admin' has password:\""}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"dbname: itopdb210270"}),"\n",(0,o.jsx)(e.li,{children:"container: itop210_270"}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.code,{children:"docker cp -a itop_dump.sql containername:/tmp/"})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"Dump db from 2.1"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.code,{children:"mysql -u__ -p__ containername < /tmp/itop_dump.sql"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.code,{children:"docker cp -a extensions/sample-add-attribute containername:/var/www/html/extensions/"})}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["In docker bash, ",(0,o.jsx)(e.code,{children:"./make-itop-config-writable.sh"})]}),"\n",(0,o.jsxs)(e.li,{children:["In browser, go to ",(0,o.jsx)(e.code,{children:"localhost:8000/setup"})]}),"\n",(0,o.jsx)(e.li,{children:"Go through wizard, make sure Add Attribute is selected in extensions (if extension was made in previous version)"}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(a,{...n})}):a(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>r});var s=i(6540);const o={},d=s.createContext(o);function l(n){const e=s.useContext(d);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:l(n.components),s.createElement(d.Provider,{value:e},n.children)}}}]);